<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BidMyRoom Search Card</title>

    <!-- Tailwind via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts - Inter for excellent lowercase readability -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <style>
      /* Green screen background for compositing in video */
      body {
        background-color: #00ff00;
        font-family: "Manrope", sans-serif;
      }

      /* Optional: lock to full viewport */
      .video-frame {
        width: 100vw;
        height: 100vh;
      }

      /* Circle-to-pill behavior for the search bar */
      #search-bar {
        width: 420px;
        transition: width 0.32s cubic-bezier(0.22, 0.61, 0.36, 1),
          padding 0.32s cubic-bezier(0.22, 0.61, 0.36, 1);
      }

      #search-bar.collapsed {
        width: 64px;
        padding-left: 0.9rem;
        padding-right: 0.9rem;
        justify-content: center;
      }

      /* Larger initial state for better readability */
      #search-shell.large {
        transform: scale(1.5);
        transform-origin: center;
      }

      /* Ensure text is readable at larger size - scale font-size more than the container */
      #search-shell.large #brand-label {
        font-size: 1.1rem !important; /* Even larger text for readability */
        letter-spacing: 0.45em;
      }

      /* Smooth transition from large to normal */
      #search-shell {
        transition: transform 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
        /* Animation optimization */
        will-change: transform, opacity;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }

      /* Fix parent container width to prevent expansion when search-bar grows */
      #search-shell > div {
        width: 420px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* Label reveal */
      #brand-label {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, sans-serif;
        font-weight: 600;
        opacity: 0;
        transform: translateX(4px);
        transition: opacity 0.22s ease-out, transform 0.22s ease-out,
          font-size 0.5s cubic-bezier(0.22, 0.61, 0.36, 1),
          letter-spacing 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
        white-space: nowrap;
        /* Better lowercase rendering */
        font-feature-settings: "kern" 1, "liga" 1;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      #brand-label.visible {
        opacity: 1;
        transform: translateX(0);
      }

      /* Frame container - optimized for smooth height animation */
      #frame-shell {
        will-change: height;
        transform: translateZ(0); /* Force GPU acceleration */
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        -webkit-transform: translateZ(0);
        /* Define transition in CSS for better control - ensure it's smooth */
        transition: height var(--frame-animation-duration, 1.2s)
          cubic-bezier(0.25, 0.46, 0.45, 0.94);
        /* Prevent layout shifts but allow smooth transitions */
        contain: layout;
        /* Ensure smooth rendering */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Ensure iframe doesn't interfere with smooth animation */
      #frame-shell iframe {
        display: block;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        will-change: auto;
      }

      /* Glossy / glassy black search surface */
      .glossy-search {
        position: relative;
        overflow: hidden;
        background: radial-gradient(
            circle at 10% 0%,
            rgba(255, 255, 255, 0.35),
            transparent 55%
          ),
          radial-gradient(
            circle at 90% 100%,
            rgba(255, 255, 255, 0.18),
            transparent 55%
          ),
          rgba(0, 0, 0, 0.9);
        backdrop-filter: blur(18px);
      }

      .glossy-search::before {
        content: "";
        position: absolute;
        inset: -40%;
        background: linear-gradient(
          120deg,
          rgba(255, 255, 255, 0.8),
          rgba(255, 255, 255, 0.05),
          rgba(255, 255, 255, 0.6)
        );
        opacity: 0;
        transform: translateX(-60%);
        pointer-events: none;
      }

      .glossy-search.shine::before {
        animation: shine var(--shine-animation-duration, 1.8s) ease-in-out
          forwards;
      }

      @keyframes shine {
        0% {
          opacity: 0;
          transform: translateX(-80%);
        }
        20% {
          opacity: 0.7;
        }
        80% {
          opacity: 0.4;
        }
        100% {
          opacity: 0;
          transform: translateX(80%);
        }
      }

      /* Additional styles from landing page for form interactions */
      .suggestion-item:active,
      .suggestion-clicked {
        background-color: #e5e7eb; /* gray-200 */
        transform: scale(0.98);
        transition: transform 0.1s ease-in-out;
      }

      .suggestion-hover-automated {
        background-color: rgb(55 65 81); /* bg-gray-700 */
        color: white;
      }

      .date-clicked {
        transform: scale(0.9);
        transition: transform 0.1s ease-in-out;
      }

      .date-range-start {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      }

      .date-range-end {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
      }

      .date-in-range {
        border-radius: 0;
      }

      /* Phase 2: Form scaling animation */
      #home-main-form {
        /* Define transition and origin for scaling */
        transition: transform var(--form-scale-duration, 0.8s)
          cubic-bezier(0.25, 0.46, 0.45, 0.94);
        transform-origin: bottom;
        /* Animation optimization */
        will-change: transform;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
      }

      #home-main-form.scaled-up {
        /* Scale up to ~2x size */
        transform: scale(var(--form-scale-factor, 2));
      }

      /* Custom cursor for Phase 3 */
      #custom-cursor {
        position: absolute;
        top: 50%;
        left: 25%;
        width: 40px;
        height: 40px;
        background-color: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.8);
        border-radius: 50%;
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.7),
          0 0 10px rgba(0, 0, 0, 0.3);
        pointer-events: none;
        z-index: 100;
        opacity: 0;
        transform: translate(-50%, -50%) scale(0);
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
      }

      #custom-cursor.visible {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }

      /* Input focus highlight for Phase 3 */
      .input-focus-highlight {
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.5); /* blue-500 with opacity */
        transition: box-shadow 0.2s ease-in-out;
      }

      /* Button press effect for Phase 3 */
      .search-button-pressed {
        transform: scale(0.96);
        transition: transform 0.1s ease-in-out;
      }

      #search-submit-button {
        position: relative;
        /* Ensure cursor stays inside on overflow */
        overflow: hidden;
      }

      .main-container-animating {
        height: var(--main-container-height);
        width: var(--main-container-width);
        position: relative;
      }

      .main-container-animating #home-main-form {
        position: absolute;
        top: var(--home-main-form-top);
        left: var(--home-main-form-left);
        width: var(--home-main-form-width);
      }

      .main-container-animating #frame-shell,
      .main-container-animating #search-shell {
        position: absolute;
        top: var(--frame-shell-top);
        left: var(--frame-shell-left);
        width: var(--frame-shell-width);
      }

      .fade-out-left {
        animation: fadeOutLeft 0.5s ease-out forwards;
      }

      .fade-out-right {
        animation: fadeOutRight 0.5s ease-out forwards;
      }

      .fade-out {
        animation: fadeOut 0.5s ease-out forwards;
      }

      @keyframes fadeOutLeft {
        to {
          opacity: 0;
          transform: translateX(-50%);
        }
      }

      @keyframes fadeOutRight {
        to {
          opacity: 0;
          transform: translateX(50%);
        }
      }

      @keyframes fadeOut {
        to {
          opacity: 0;
        }
      }
    </style>
  </head>
  <body class="video-frame flex items-center justify-center">
    <!-- 1. Centering wrapper only (no big white card) -->
    <div
      id="main-container"
      class="flex flex-col items-center justify-center gap-6"
      style="
        padding: 28px;
        border-radius: 30px;
        background: radial-gradient(
            circle at 0% 0%,
            rgba(255, 255, 255, 0.25),
            transparent 55%
          ),
          radial-gradient(
            circle at 100% 100%,
            rgba(255, 255, 255, 0.18),
            transparent 55%
          ),
          rgba(10, 10, 10, 0.68);
        box-shadow: 0 24px 80px rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(26px);
        -webkit-backdrop-filter: blur(26px);
        border: 1px solid rgba(255, 255, 255, 0.16);
      "
    >
      <!-- The cursor element for phase 3 is now inside the button -->
      <!-- 2. Search box with its own subtle white backdrop for blur -->
      <div
        id="search-shell"
        class="opacity-0 translate-y-4 scale-[0.98] transition-all duration-700 ease-out"
      >
        <div class="relative inline-flex items-center justify-center">
          <!-- Soft white patch behind the search for nicer blur (not a big card) -->
          <!-- <div
            class="absolute inset-[-18px] rounded-full bg-white"
            aria-hidden="true"
          ></div> -->

          <div
            id="search-bar"
            class="relative z-10 glossy-search flex items-center gap-3 px-7 py-4 rounded-full border border-white/10 shadow-[0_18px_55px_rgba(0,0,0,0.7)] collapsed"
          >
            <span
              id="brand-label"
              class="text-xs sm:text-sm font-semibold tracking-[0.35em] text-white/90 whitespace-nowrap"
            >
            </span>

            <span class="ml-auto text-white/90">
              <!-- Simple search icon -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="11" cy="11" r="7"></circle>
                <line x1="16.5" y1="16.5" x2="21" y2="21"></line>
              </svg>
            </span>
          </div>
        </div>
      </div>

      <!-- 3. Frame area: starts collapsed, then grows to iframe dimensions -->
      <div
        id="frame-shell"
        class="w-[412px] h-0 rounded-[32px] overflow-hidden bg-black/90 shadow-[0_22px_80px_rgba(0,0,0,0.4)]"
      >
        <div
          id="frame-content"
          class="w-[412px] min-h-[880px] border-0 rounded-[32px] overflow-hidden"
        >
          <!-- Embedded first slide from landingpage.html, mobile-focused -->
          <section
            class="relative w-full min-h-[880px] flex flex-col items-center justify-start pt-4 pb-10"
          >
            <img
              src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1500&q=80"
              alt="Hero background"
              class="rounded-[32px]"
              style="
                position: absolute;
                height: 100%;
                width: 100%;
                inset: 0px;
                object-fit: cover;
                color: transparent;
              "
            />
            <div class="absolute inset-0 bg-black/50 rounded-[32px]"></div>
            <div class="relative z-10 w-full px-6 flex flex-col gap-6">
              <!-- Mobile header with logo and toggle button -->
              <header class="w-full flex items-center justify-between pt-2">
                <a href="#" class="cursor-pointer">
                  <svg
                    viewBox="0 0 586 110"
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-6 w-auto text-white"
                  >
                    <g clip-path="url(#a)" fill="currentColor">
                      <path
                        d="M55.62 28.51q.007-.348.008-.696C55.628 12.452 43.176 0 27.814 0A27.7 27.7 0 0 0 9.578 6.812C3.71 11.91 0 19.429 0 27.814v37.76q-.001.143.004.284a39.95 39.95 0 0 0 9.574 25.74 40 40 0 0 0 2.004 2.181c7.273 7.379 17.389 11.951 28.573 11.951 22.178 0 40.156-17.978 40.156-40.155 0-16.696-10.19-31.012-24.69-37.065M40.156 96.152c-16.276 0-29.582-12.717-30.521-28.757q-.056-.902-.056-1.82V27.814c0-10.072 8.164-18.236 18.236-18.236 9.405 0 17.145 7.118 18.129 16.261a18 18 0 0 1 .107 1.975c0 2.667-.575 5.202-1.603 7.486 3.26.457 6.359 1.43 9.203 2.83 10.12 4.983 17.082 15.402 17.082 27.445 0 16.887-13.69 30.577-30.577 30.577"
                      />
                      <path
                        d="M9.578 50.301A40.1 40.1 0 0 0 .004 65.86 39.95 39.95 0 0 0 9.578 91.6a40 40 0 0 0 2.004 2.18A30.43 30.43 0 0 1 7.53 78.557c0-3.938.744-7.707 2.103-11.162 3.894-9.936 12.843-17.337 23.685-19.039v-9.667c-9.243 1.098-17.521 5.33-23.74 11.612"
                      />
                    </g>
                    <path
                      d="M125.732 37.201c13.232.1 21.852 8.342 21.852 25.73 0 17.386-8.62 25.728-21.852 25.728-7.919 0-14.033-2.814-17.642-9.246v8.643h-9.923V17.704h9.923v28.744c3.609-6.433 9.723-9.347 17.642-9.247m-2.606 43.619c8.921 0 14.635-6.131 14.635-17.89s-5.714-17.789-14.635-17.89c-8.019-.1-15.036 4.423-15.036 17.89s7.017 17.89 15.036 17.89m33.673-63.116V28.86h10.324V17.704zm10.124 70.352h-9.924V37.804h9.924zm58.949-70.352v70.352h-10.024v-8.643c-3.609 6.432-9.723 9.246-17.642 9.246-13.232 0-21.852-8.342-21.852-25.729s8.62-25.628 21.852-25.729c7.919-.1 14.033 2.814 17.642 9.247V17.704zm-25.06 63.116c8.019 0 15.036-4.422 15.036-17.89s-7.017-17.99-15.036-17.89c-8.921.101-14.635 6.131-14.635 17.89s5.714 17.89 14.635 17.89M292.019 37c14.034 0 14.134 13.267 14.134 22.714v28.342h-10.024V59.714c0-7.337-1.503-14.372-7.818-14.372-5.012 0-12.33.905-12.33 23.92v18.794h-10.024V59.714c0-7.337-1.503-14.372-7.818-14.372-5.012 0-12.33.905-12.33 23.92v18.794h-9.923V37.804h9.923v10.453C249.217 40.417 254.831 37 261.847 37c9.323 0 12.53 5.93 13.633 12.563C278.688 40.82 284.602 37 292.019 37m68.951.804-21.451 57.388c-4.311 12.965-7.919 14.472-16.64 14.472h-2.707v-8.744h2.707c4.711 0 5.714-1.005 7.518-5.728l2.506-7.237-18.745-50.15h10.926l12.43 36.784 12.53-36.785zM396.662 37v8.844c-11.528 0-17.141 5.026-17.141 23.418v18.794h-10.024V37.804h10.024v9.247c3.208-7.036 8.721-10.05 16.94-10.05zm53.063 25.93c0 17.387-11.427 25.729-24.659 25.729s-24.658-8.342-24.658-25.729 11.427-25.83 24.658-25.729 24.659 8.342 24.659 25.73m-9.523 0c0-12.261-7.016-17.286-15.136-17.387S409.93 50.669 409.93 62.93c0 12.262 7.017 17.387 15.136 17.387s15.136-5.125 15.136-17.387m66.295 0c0 17.387-11.427 25.729-24.659 25.729S457.18 80.317 457.18 62.93s11.427-25.83 24.658-25.729 24.659 8.342 24.659 25.73m-9.523 0c0-12.261-7.016-17.286-15.136-17.387s-15.136 5.126-15.136 17.387c0 12.262 7.017 17.387 15.136 17.387s15.136-5.125 15.136-17.387M571.866 37C585.9 37 586 50.267 586 59.714v28.342h-10.024V59.714c0-7.337-1.504-14.372-7.819-14.372-5.012 0-12.329.905-12.329 23.92v18.794h-10.024V59.714c0-7.337-1.503-14.372-7.819-14.372-5.011 0-12.329.905-12.329 23.92v18.794h-9.924V37.804h9.924v10.453C529.064 40.417 534.678 37 541.694 37c9.323 0 12.53 5.93 13.633 12.563C558.534 40.82 564.449 37 571.866 37"
                      fill="currentColor"
                    />
                    <defs>
                      <clipPath id="a">
                        <path fill="currentColor" d="M0 0h80.311v105.73H0z" />
                      </clipPath>
                    </defs>
                  </svg>
                </a>
                <button
                  type="button"
                  class="p-2 rounded-md text-white hover:bg-white/20"
                  aria-label="Open menu"
                >
                  <svg
                    class="w-6 h-6"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M4 6h16M4 12h16m-7 6h7"
                    ></path>
                  </svg>
                </button>
              </header>

              <div
                class="flex flex-col items-center justify-center gap-8 mt-12"
              >
                <div class="text-white text-center max-w-xl">
                  <h1 class="text-3xl sm:text-4xl font-extrabold leading-tight">
                    Post Your Stay Once
                  </h1>
                  <h1
                    class="text-3xl sm:text-4xl font-extrabold leading-tight mb-4"
                  >
                    Get Multiple Offers
                  </h1>
                  <p class="text-base sm:text-lg text-slate-100 mb-6">
                    Hotels and other properties compete for your booking compare
                    offers, save money, and book the deal that fits you best,
                    all for free.
                  </p>
                </div>

                <div class="w-full max-w-md">
                  <form
                    id="home-main-form"
                    class="bg-white rounded-2xl shadow-2xl px-4 py-5 w-full"
                    style="min-height: 420px"
                  >
                    <h2
                      class="text-xl sm:text-2xl font-bold text-slate-900 mb-1"
                    >
                      Get Competing Offers Now
                    </h2>
                    <p class="text-slate-500 text-sm mb-6">
                      It's free and takes less than 2 minutes.
                    </p>
                    <div class="space-y-4">
                      <div>
                        <label
                          class="block text-slate-700 text-sm font-medium mb-1"
                          for="destination"
                          >Where To</label
                        >
                        <div class="relative">
                          <input
                            class="w-full px-4 py-2 pr-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none bg-slate-50 text-base font-semibold h-[46px] text-slate-600"
                            id="destination"
                            name="destination"
                            type="text"
                            placeholder="e.g. New York, Orlando"
                            value="Orlando, FL"
                            autocomplete="off"
                            required=""
                          />
                          <div
                            class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"
                          >
                            <svg
                              class="w-5 h-5 text-slate-400"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                              ></path>
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                              ></path>
                            </svg>
                          </div>
                          <div
                            id="location-suggestions"
                            class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg hidden"
                            style="max-height: 200px; overflow-y: auto"
                          >
                            <!-- Suggestions will be populated by JS -->
                          </div>
                        </div>
                      </div>
                      <div>
                        <label
                          class="block text-slate-700 text-sm font-medium mb-1"
                          for="date-input"
                          >Dates</label
                        >
                        <div class="relative">
                          <input
                            type="text"
                            id="date-input"
                            class="w-full px-4 py-2 pr-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none bg-slate-50 text-base font-semibold h-[48px] text-slate-600"
                            placeholder="Enter Date"
                            value="Dec 28 â€“ Jan 4"
                          />
                          <div
                            class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"
                          >
                            <svg
                              class="w-5 h-5 text-slate-400"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                              ></path>
                            </svg>
                          </div>
                          <div
                            id="calendar-container"
                            class="absolute top-full left-0 right-0 mt-2 bg-white text-slate-800 rounded-lg p-2 shadow-lg z-20 hidden border border-slate-200"
                          >
                            <div class="flex justify-between items-center mb-4">
                              <button
                                class="text-slate-500 hover:text-slate-800"
                              >
                                <svg
                                  class="w-5 h-5"
                                  fill="none"
                                  stroke="currentColor"
                                  viewBox="0 0 24 24"
                                >
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M15 19l-7-7 7-7"
                                  ></path>
                                </svg>
                              </button>
                              <h3 class="text-lg font-semibold">
                                January 2026
                              </h3>
                              <button
                                class="text-slate-500 hover:text-slate-800"
                              >
                                <svg
                                  class="w-5 h-5"
                                  fill="none"
                                  stroke="currentColor"
                                  viewBox="0 0 24 24"
                                >
                                  <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M9 5l7 7-7 7"
                                  ></path>
                                </svg>
                              </button>
                            </div>
                            <div
                              class="grid grid-cols-7 text-center text-sm text-slate-500 mb-2"
                            >
                              <span>S</span><span>M</span><span>T</span
                              ><span>W</span><span>T</span><span>F</span
                              ><span>S</span>
                            </div>
                            <div
                              id="calendar-grid"
                              class="grid grid-cols-7 text-center"
                            >
                              <!-- Dates will be populated by JS -->
                            </div>
                          </div>
                        </div>
                      </div>
                      <div>
                        <label
                          class="block text-slate-700 text-sm font-medium mb-1"
                          for="travellers-rooms"
                          >Travellers and Rooms</label
                        >
                        <div class="relative">
                          <button
                            type="button"
                            id="travelers-button"
                            class="w-full px-4 py-2 pr-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:outline-none bg-slate-50 text-left cursor-pointer flex items-center justify-between text-base font-semibold h-[48px]"
                          >
                            <span
                              class="text-slate-600 truncate"
                              id="travelers-display"
                              >1 room, 1 adult</span
                            >
                            <svg
                              id="travelers-arrow"
                              class="w-4 h-4 text-slate-400 transition-transform"
                              fill="none"
                              stroke="currentColor"
                              viewBox="0 0 24 24"
                            >
                              <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M19 9l-7 7-7-7"
                              ></path>
                            </svg>
                          </button>
                          <div
                            id="travelers-dropdown"
                            class="absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-lg z-50 hidden"
                          >
                            <div class="p-3 space-y-3">
                              <div class="flex items-center justify-between">
                                <div>
                                  <span
                                    class="text-slate-700 font-medium text-sm"
                                    >Rooms</span
                                  >
                                </div>
                                <div class="flex items-center gap-2">
                                  <button
                                    type="button"
                                    data-type="rooms"
                                    data-action="decrement"
                                    class="w-6 h-6 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 transition text-sm"
                                  >
                                    -
                                  </button>
                                  <span
                                    class="w-6 text-center font-semibold text-slate-900 text-sm"
                                    id="rooms-count"
                                    >1</span
                                  >
                                  <button
                                    type="button"
                                    data-type="rooms"
                                    data-action="increment"
                                    class="w-6 h-6 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 transition text-sm"
                                  >
                                    +
                                  </button>
                                </div>
                              </div>
                              <div class="flex items-center justify-between">
                                <div>
                                  <span
                                    class="text-slate-700 font-medium text-sm"
                                    >Adults</span
                                  >
                                </div>
                                <div class="flex items-center gap-2">
                                  <button
                                    type="button"
                                    data-type="adults"
                                    data-action="decrement"
                                    class="w-6 h-6 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 transition text-sm"
                                  >
                                    -
                                  </button>
                                  <span
                                    class="w-6 text-center font-semibold text-slate-900 text-sm"
                                    id="adults-count"
                                    >1</span
                                  >
                                  <button
                                    type="button"
                                    data-type="adults"
                                    data-action="increment"
                                    class="w-6 h-6 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 transition text-sm"
                                  >
                                    +
                                  </button>
                                </div>
                              </div>
                              <div class="flex items-center justify-between">
                                <div>
                                  <span
                                    class="text-slate-700 font-medium text-sm"
                                    >Children</span
                                  >
                                </div>
                                <div class="flex items-center gap-2">
                                  <button
                                    type="button"
                                    data-type="children"
                                    data-action="decrement"
                                    class="w-6 h-6 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 transition text-sm"
                                  >
                                    -
                                  </button>
                                  <span
                                    class="w-6 text-center font-semibold text-slate-900 text-sm"
                                    id="children-count"
                                    >0</span
                                  >
                                  <button
                                    type="button"
                                    data-type="children"
                                    data-action="increment"
                                    class="w-6 h-6 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center text-slate-600 transition text-sm"
                                  >
                                    +
                                  </button>
                                </div>
                              </div>
                              <div class="pt-2 border-t border-slate-200">
                                <button
                                  type="button"
                                  id="travelers-apply-button"
                                  class="w-full py-1.5 rounded-md font-semibold text-white bg-blue-600 hover:bg-blue-700 transition text-sm"
                                >
                                  Apply
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <button
                      type="submit"
                      id="search-submit-button"
                      class="mt-6 w-full py-3 rounded-lg font-bold text-white text-lg bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 transition cursor-pointer"
                    >
                      Search
                      <div id="custom-cursor"></div>
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
    <div
      id="inbox-placeholder"
      class="absolute inset-0 flex items-center justify-center opacity-0 transition-opacity duration-500 pointer-events-none"
    >
      <iframe
        src="bidmyroom_search_copy.html?theme=light"
        class="w-[364px] h-[750px] border-0 rounded-[58px] bg-transparent"
      ></iframe>
    </div>

    <script>
      //   const BRAND_TEXT = "BIDMYROOM.COM";
      const BRAND_TEXT = "bidmyroom.com";

      // --- Animation Phase 1: Intro ---
      // Total animation duration - adjust this to control overall length
      const ANIMATION_DURATION = 1500; // ms - total length of animation sequence

      // --- Animation Phase 2: Form Scale ---
      const FORM_SCALE_FACTOR = 1.76; // e.g., 2.0 means 200% size
      const FORM_SCALE_DURATION = 800; // ms
      const PAUSE_BETWEEN_PHASES = 250; // ms - gap between phase 1 and 2

      // --- Animation Phase 3: Form Interaction ---
      const CURSOR_MOVE_DURATION = 600; // ms
      const FOCUS_HIGHLIGHT_DURATION = 800; // ms - how long the highlight stays
      const PAUSE_BETWEEN_FOCUS_STEPS = 400; // ms - gap between focusing on elements
      const BUTTON_PRESS_DURATION = 150; // ms

      // Auto-calculated timings based on ANIMATION_DURATION
      const TYPE_SPEED = Math.round(
        (ANIMATION_DURATION * 0.169) / BRAND_TEXT.length
      ); // ~16.9% for typing
      const POP_IN_DURATION = Math.round(ANIMATION_DURATION * 0.073); // ~7.3% for pop-in
      const EXPAND_DURATION = Math.round(ANIMATION_DURATION * 0.106); // ~10.6% for circle expansion
      const WAIT_AFTER_TEXT = Math.round(ANIMATION_DURATION * 0.122); // ~12.2% wait after typing
      const PAUSE_BEFORE_FRAME = Math.round(ANIMATION_DURATION * 0.041); // ~4.1% pause before frame
      const FRAME_ANIMATION_DURATION = Math.round(ANIMATION_DURATION * 0.489); // ~48.9% for frame reveal
      const SHINE_ANIMATION_DURATION = Math.round(ANIMATION_DURATION * 0.733); // ~73.3% for shine animation
      const SHINE_INTERVAL = Math.round(ANIMATION_DURATION * 1.83); // Shine loop interval (~1.83x total duration)

      let shineTimer = null;

      function sleep(ms) {
        return new Promise((resolve) => setTimeout(resolve, ms));
      }

      function startShineLoop(bar) {
        if (shineTimer) {
          clearInterval(shineTimer);
        }

        // Initial shine
        bar.classList.remove("shine");
        void bar.offsetWidth; // force reflow
        bar.classList.add("shine");

        // Loop the shine for subtle motion
        shineTimer = setInterval(() => {
          bar.classList.remove("shine");
          void bar.offsetWidth;
          bar.classList.add("shine");
        }, SHINE_INTERVAL);
      }

      // Basic location suggestions setup (copied from landingpage.html)
      function setupLocationInput(rootElement) {
        const destinationInput = rootElement.querySelector("#destination");
        const suggestionsDropdown = rootElement.querySelector(
          "#location-suggestions"
        );
        if (!destinationInput || !suggestionsDropdown) {
          return;
        }
        const dummyLocations = [
          { description: "New York, NY, USA", place_id: "1" },
          { description: "Las Vegas, NV, USA", place_id: "2" },
          { description: "Orlando, FL, USA", place_id: "3" },
        ];

        destinationInput.addEventListener("input", () => {
          const value = destinationInput.value.trim();
          if (value) {
            suggestionsDropdown.innerHTML = "";
            dummyLocations.forEach((location) => {
              const suggestionDiv = document.createElement("div");
              suggestionDiv.textContent = location.description;
              suggestionDiv.className =
                "p-2 cursor-pointer hover:bg-gray-700 suggestion-item";
              suggestionDiv.onclick = () => {
                destinationInput.value = location.description;
                setTimeout(() => {
                  suggestionsDropdown.classList.add("hidden");
                }, 100);
              };
              suggestionsDropdown.appendChild(suggestionDiv);
            });
            suggestionsDropdown.classList.remove("hidden");
          } else {
            suggestionsDropdown.classList.add("hidden");
          }
        });

        document.addEventListener("click", (e) => {
          if (
            !destinationInput.contains(e.target) &&
            !suggestionsDropdown.contains(e.target)
          ) {
            suggestionsDropdown.classList.add("hidden");
          }
        });
      }

      // Travelers dropdown and counts (simplified from landingpage.html)
      function initHeroFormInteractions() {
        const travelersButton = document.getElementById("travelers-button");
        const travelersDropdown = document.getElementById("travelers-dropdown");
        const travelersArrow = document.getElementById("travelers-arrow");

        if (travelersButton && travelersDropdown && travelersArrow) {
          travelersButton.addEventListener("click", (e) => {
            e.stopPropagation();
            travelersDropdown.classList.toggle("hidden");
            travelersArrow.classList.toggle("rotate-180");
          });

          document.addEventListener("click", (e) => {
            if (
              !travelersButton.contains(e.target) &&
              !travelersDropdown.contains(e.target)
            ) {
              travelersDropdown.classList.add("hidden");
              travelersArrow.classList.remove("rotate-180");
            }
          });
        }

        const travelersDisplay = document.getElementById("travelers-display");
        const roomsCountEl = document.getElementById("rooms-count");
        const adultsCountEl = document.getElementById("adults-count");
        const childrenCountEl = document.getElementById("children-count");
        const travelersApplyButton = document.getElementById(
          "travelers-apply-button"
        );

        if (
          !travelersDisplay ||
          !roomsCountEl ||
          !adultsCountEl ||
          !childrenCountEl ||
          !travelersApplyButton
        ) {
          return;
        }

        const counts = {
          rooms: 1,
          adults: 1,
          children: 0,
        };

        const updateTravelersDisplay = () => {
          let display = `${counts.rooms} room${counts.rooms > 1 ? "s" : ""}, ${
            counts.adults
          } adult${counts.adults > 1 ? "s" : ""}`;
          if (counts.children > 0) {
            display += `, ${counts.children} child${
              counts.children > 1 ? "ren" : ""
            }`;
          }
          travelersDisplay.textContent = display;
        };

        travelersDropdown.addEventListener("click", (e) => {
          const target = e.target;
          if (!(target instanceof HTMLElement)) return;
          if (target.dataset && target.dataset.type) {
            const type = target.dataset.type;
            const action = target.dataset.action;

            if (action === "increment") {
              if (type === "rooms")
                counts.rooms = Math.min(10, counts.rooms + 1);
              if (type === "adults")
                counts.adults = Math.min(20, counts.adults + 1);
              if (type === "children")
                counts.children = Math.min(10, counts.children + 1);
            } else if (action === "decrement") {
              if (type === "rooms")
                counts.rooms = Math.max(1, counts.rooms - 1);
              if (type === "adults")
                counts.adults = Math.max(1, counts.adults - 1);
              if (type === "children")
                counts.children = Math.max(0, counts.children - 1);
            }

            roomsCountEl.textContent = String(counts.rooms);
            adultsCountEl.textContent = String(counts.adults);
            childrenCountEl.textContent = String(counts.children);
          }
        });

        travelersApplyButton.addEventListener("click", () => {
          updateTravelersDisplay();
          travelersDropdown.classList.add("hidden");
          travelersArrow.classList.remove("rotate-180");
        });

        updateTravelersDisplay();

        const form = document.getElementById("home-main-form");
        if (form) {
          form.addEventListener("submit", (e) => {
            e.preventDefault();
          });
        }
      }

      async function playPhaseTwo(options = {}) {
        const { delay = 0 } = options;
        const frameShell = document.getElementById("frame-shell");
        const frameContent = document.getElementById("frame-content");
        const form = document.getElementById("home-main-form");

        if (!frameShell || !form || !frameContent) {
          console.error("Required elements for phase two not found.");
          return;
        }

        const run = async () => {
          // As per instruction, remove overflow hidden before animation starts
          frameShell.classList.remove("overflow-hidden");
          frameContent.classList.remove("overflow-hidden");

          // Add a class to trigger the scaling animation
          form.classList.add("scaled-up");
        };

        if (delay > 0) {
          setTimeout(run, delay);
        } else {
          run();
        }
      }

      async function playPhaseThree(options = {}) {
        const { delay = 0 } = options;
        const cursor = document.getElementById("custom-cursor");
        const dateInput = document.getElementById("date-input");
        const destinationInput = document.getElementById("destination");
        const searchButton = document.getElementById("search-submit-button");

        if (!cursor || !dateInput || !destinationInput || !searchButton) {
          console.error("Required elements for phase three not found.");
          return;
        }

        const run = async () => {
          // Step 1: Focus on Dates input (no cursor)
          dateInput.classList.add("input-focus-highlight");
          await sleep(FOCUS_HIGHLIGHT_DURATION);
          dateInput.classList.remove("input-focus-highlight");

          await sleep(PAUSE_BETWEEN_FOCUS_STEPS);

          // Step 2: Focus on Destination input (no cursor)
          destinationInput.classList.add("input-focus-highlight");
          await sleep(FOCUS_HIGHLIGHT_DURATION);
          destinationInput.classList.remove("input-focus-highlight");

          await sleep(PAUSE_BETWEEN_FOCUS_STEPS);

          // Step 3: Press the search button with cursor
          cursor.classList.add("visible");
          await sleep(300); // Allow cursor to fade in

          searchButton.classList.add("search-button-pressed");
          await sleep(BUTTON_PRESS_DURATION);
          searchButton.classList.remove("search-button-pressed");

          await sleep(300); // Add a minor delay here

          // --- NEW ANIMATION LOGIC ---
          const mainContainer = document.getElementById("main-container");
          const homeMainForm = document.getElementById("home-main-form");
          const frameShell = document.getElementById("frame-shell");
          const searchShell = document.getElementById("search-shell");

          if (mainContainer && homeMainForm && frameShell && searchShell) {
            const mainContainerRect = mainContainer.getBoundingClientRect();
            const homeMainFormRect = homeMainForm.getBoundingClientRect();
            const frameShellRect = frameShell.getBoundingClientRect();

            // Set CSS variables for positioning
            mainContainer.style.setProperty(
              "--main-container-height",
              `${mainContainer.offsetHeight - 150}px`
            );
            mainContainer.style.setProperty(
              "--main-container-width",
              `${mainContainer.offsetWidth}px`
            );
            mainContainer.style.setProperty(
              "--home-main-form-top",
              `${homeMainFormRect.top - mainContainerRect.top}px`
            );
            mainContainer.style.setProperty(
              "--home-main-form-left",
              `${homeMainFormRect.left - mainContainerRect.left}px`
            );
            mainContainer.style.setProperty(
              "--home-main-form-width",
              `${homeMainFormRect.width}px`
            );
            mainContainer.style.setProperty(
              "--frame-shell-top",
              `${frameShellRect.top - mainContainerRect.top}px`
            );
            mainContainer.style.setProperty(
              "--frame-shell-left",
              `${frameShellRect.left - mainContainerRect.left}px`
            );
            mainContainer.style.setProperty(
              "--frame-shell-width",
              `${frameShellRect.width}px`
            );

            // Add classes to trigger animations
            mainContainer.classList.add("main-container-animating");
            mainContainer.classList.add("fade-out");
            homeMainForm.classList.add("fade-out-left");
            frameShell.classList.add("fade-out-right");
            searchShell.classList.add("fade-out");

            // After animation, hide elements to prevent any interaction
            let animationEndCount = 0;
            const onAnimationEnd = (event) => {
              if (event.target !== mainContainer) {
                event.target.style.display = "none";
                animationEndCount++;
                if (animationEndCount === 3) {
                  mainContainer.style.display = "none";
                  const placeholder =
                    document.getElementById("inbox-placeholder");
                  if (placeholder) {
                    placeholder.classList.remove("opacity-0");
                    placeholder.style.pointerEvents = "auto";

                    // Send a message to the iframe to start its animation
                    const iframe = placeholder.querySelector("iframe");
                    if (iframe && iframe.contentWindow) {
                      iframe.contentWindow.postMessage("startAnimation", "*");
                    }
                  }
                }
              }
            };

            homeMainForm.addEventListener("animationend", onAnimationEnd, {
              once: true,
            });
            frameShell.addEventListener("animationend", onAnimationEnd, {
              once: true,
            });
            searchShell.addEventListener("animationend", onAnimationEnd, {
              once: true,
            });
          }
          // --- END NEW LOGIC ---

          await sleep(500); // Wait a moment before hiding cursor
          cursor.classList.remove("visible");
        };

        if (delay > 0) {
          setTimeout(run, delay);
        } else {
          run();
        }
      }

      async function playBidMyRoomIntro(options = {}) {
        const shell = document.getElementById("search-shell");
        const bar = document.getElementById("search-bar");
        const label = document.getElementById("brand-label");
        const frameShell = document.getElementById("frame-shell");
        const frameContent = document.getElementById("frame-content");
        if (!shell || !bar || !label) return;

        const { delay = 0 } = options;

        const run = async () => {
          // Reset to initial state: hidden, circle, no text
          shell.classList.add("opacity-0", "translate-y-4", "scale-[0.98]");
          shell.classList.remove(
            "opacity-100",
            "translate-y-0",
            "scale-100",
            "large"
          );

          bar.classList.add("collapsed");
          bar.classList.remove("shine");

          label.textContent = "";
          label.classList.remove("visible");

          // Reset frame state if present: keep embedded content alive, hide with height
          if (frameShell && frameContent) {
            frameShell.style.height = "0px";
            frameShell.style.willChange = "height"; // Re-enable for next animation
          }

          // 1) Circle with search icon fades / pops in (at larger size)
          requestAnimationFrame(() => {
            shell.classList.remove(
              "opacity-0",
              "translate-y-4",
              "scale-[0.98]"
            );
            shell.classList.add(
              "opacity-100",
              "translate-y-0",
              "scale-100",
              "large"
            );
          });

          await sleep(POP_IN_DURATION); // quick pop-in

          // 2) Circle expands into pill (still large)
          bar.classList.remove("collapsed");
          await sleep(EXPAND_DURATION);

          // 3) Characters reveal quickly, one-by-one (still large for readability)
          label.classList.add("visible");
          for (const ch of BRAND_TEXT) {
            label.textContent += ch;
            await sleep(TYPE_SPEED);
          }

          // 4) Wait a moment, then transition from large to normal size
          await sleep(WAIT_AFTER_TEXT);
          shell.classList.remove("large");

          // 5) Kick off the glossy sweep + loop
          startShineLoop(bar);

          // 5) Reveal frame container by animating its height to embedded content size
          if (frameShell && frameContent) {
            await sleep(PAUSE_BEFORE_FRAME); // tiny pause after text finishes

            // Ensure height is explicitly 0 before starting animation
            frameShell.style.height = "0px";

            // Use double requestAnimationFrame to ensure browser has processed the reset
            requestAnimationFrame(() => {
              requestAnimationFrame(() => {
                const targetHeight = frameContent.offsetHeight;
                // Trigger the height animation
                frameShell.style.height = targetHeight + "px"; // ~880px

                // Clean up will-change after animation completes (FRAME_ANIMATION_DURATION + buffer)
                setTimeout(() => {
                  frameShell.style.willChange = "auto";
                }, FRAME_ANIMATION_DURATION + 100);
              });
            });
          }
        };

        if (delay > 0) {
          setTimeout(run, delay);
        } else {
          run();
        }
      }

      // Auto-play once on load; can be retriggered later if needed
      window.addEventListener("load", () => {
        // Set CSS variables for animation durations
        document.documentElement.style.setProperty(
          "--frame-animation-duration",
          `${FRAME_ANIMATION_DURATION}ms`
        );
        document.documentElement.style.setProperty(
          "--shine-animation-duration",
          `${SHINE_ANIMATION_DURATION}ms`
        );
        document.documentElement.style.setProperty(
          "--form-scale-duration",
          `${FORM_SCALE_DURATION}ms`
        );
        document.documentElement.style.setProperty(
          "--form-scale-factor",
          `${FORM_SCALE_FACTOR}`
        );
        document.documentElement.style.setProperty(
          "--cursor-move-duration",
          `${CURSOR_MOVE_DURATION}ms`
        );

        // --- Animation Orchestration ---
        const phaseOneDelay = 1000;
        const phaseOneDuration = ANIMATION_DURATION;
        const phaseTwoDelay =
          phaseOneDelay + phaseOneDuration + PAUSE_BETWEEN_PHASES;
        const phaseTwoDuration = FORM_SCALE_DURATION;
        const phaseThreeDelay = phaseTwoDelay + phaseTwoDuration + 500; // 500ms pause

        // Phase 1: Intro animation
        playBidMyRoomIntro({ delay: phaseOneDelay });

        // Phase 2: Form scaling animation
        playPhaseTwo({
          delay: phaseTwoDelay,
        });

        // Phase 3: Form interaction simulation
        playPhaseThree({ delay: phaseThreeDelay });

        // Expose globally if you want to time it manually from console
        window.playBidMyRoomIntro = playBidMyRoomIntro;
        window.playPhaseTwo = playPhaseTwo;
        window.playPhaseThree = playPhaseThree;

        // Initialize embedded hero form behaviours (no extra animations)
        setupLocationInput(document);
        initHeroFormInteractions();
      });
    </script>
  </body>
</html>
